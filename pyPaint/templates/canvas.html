<!DOCTYPE html>
<html lang="en">
<head>
    {% load static %}
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <title>Paint Canvas</title>
    <!-- <link rel="stylesheet" href="{% static 'css/style.css' %}"> -->
    
</head>
<body>
    <div>
        {% block controls %}
            {% include 'controls.html' %}
        {% endblock controls%}
        <div id="sketch">
            <canvas id="paint"></canvas>
        </div>
    </div>
</body>
<script src="{% static 'js/paintJS.js' %}"></script>
<script>   
    var store_brush;
    var store_color;
    var colorPicker = document.querySelector("#colorPicker");
    var slider = document.getElementById("brush_size");
    var output = document.getElementById("b_size");
    output.innerHTML = slider.value;
    var store_eraser = slider.value;

    slider.oninput = function() {
        output.innerHTML = this.value;
        getSize(this.value);
    }

    function startup() {        
        colorPicker.value = defaultColor;
        colorPicker.addEventListener("input", updateFirst, false);
        colorPicker.addEventListener("change", updateAll, false);
        colorPicker.select();
    }
    
    colorPicker.addEventListener("change", watchColorPicker, false);

    function watchColorPicker(event) {
        // $("#color_code").css('color', event.target.value);
        getColor(event.target.value)
        $('#brush').trigger("click");
    }

    // remove this once controls are finished 
    $('.btn-secondary').click(function() {
        $(this).addClass('active').siblings().removeClass('active')
    });

    $('#eraser').click(function() {
        $(this).addClass('active').siblings().removeClass('active')
        store_brush = slider.value;
        store_color = colorPicker.value;
        getSize(store_eraser);
        getColor('#FFFFFF');
        output.innerHTML = store_eraser;
        slider.value = store_eraser;
    })

    $('#brush').click(function() {
        store_eraser = slider.value;
        $(this).addClass('active').siblings().removeClass('active')
        getSize(store_brush);
        getColor(store_color);
        output.innerHTML = store_brush;
        slider.value = store_brush;
    })
</script>
</html>